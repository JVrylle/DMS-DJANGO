{% extends "User/user_dash.html" %}
{% block usercontent %}

<style>
    h3 {
        text-align: center;
        margin-bottom: 20px;
    }
</style>


{% if show_existing_patient_modal %}
<!-- Modal Structure -->
<div class="modal fade" id="existingPatientModal" tabindex="-1" aria-labelledby="existingPatientModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="existingPatientModalLabel">Have you been a patient at Doc2Ne Dental Clinic before?</h5>
      </div>
      <div class="modal-body">
        <form method="POST">
          {% csrf_token %}
          <div class="d-flex justify-content-around">
            <button name="existing_status" value="yes" type="submit" class="btn btn-primary">Yes, Iâ€™ve been a patient before</button>
            <button name="existing_status" value="no" type="submit" class="btn btn-secondary">No, this is my first time</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Script to trigger modal -->
<script>
  var modal = new bootstrap.Modal(document.getElementById('existingPatientModal'));
  modal.show();

  setTimeout(function() {
    var modal = new bootstrap.Modal(document.getElementById('existingPatientModal'));
    modal.show();
    }, 500);




</script>
{% endif %}

<div class="main-container">
    
    <div class="main-containers first">
        {% if patient %}
        <h3>Please Fill Up the Patient Information Record Form to Access the Doc2Ne Dental Management System</h3>
        <h2>Patient Information Record (PIR)</h2>

        
            <p><strong>Full Name:</strong> {{ patient.first_name }} {{ patient.middle_name }} {{ patient.last_name }}</p>
            <p><strong>Birthdate:</strong> {{ patient.birthdate }}</p>
            <p><strong>Sex:</strong> {{ patient.sex }}</p>
            <p><strong>Age:</strong> {{ patient.age }}</p>
            <p><strong>Address:</strong> {{ patient.home_address }}</p>
            <p><strong>Phone:</strong> {{ patient.cel_mobile_no }}</p>
            <p><strong>Email:</strong> {{ patient.email }}</p>
            <!-- Add more fields as needed -->

            



            {% if patient.is_verified %}
                <div style="margin-top: 20px; padding: 10px; background: #d4edda; border: 1px solid #c3e6cb;">
                    <strong>Note:</strong><br><br>
                    Your account has been successfully verified by the administrator.<br>
                    You now have full access to the Doc2Ne Dental Management System.
                </div>
            {% else %}
                <div style="margin-top: 20px; padding: 10px; background: #fff3cd; border: 1px solid #ffeeba;">
                    <strong>Note:</strong><br><br>
                    Your submitted information is currently under review.<br>
                    If you are an existing patient of Doc2Ne Dental Clinic, please wait for the administrator to verify your account.<br>
                    If you are a new patient without prior records at Doc2Ne Clinic, kindly visit the clinic to complete your official registration.
                </div>
            {% endif %}

        {% else %}
            <form method="POST" class="pir-form">
                {% csrf_token %}
                {{ form.as_p }} 
                <button type="submit">Save</button>
            </form>
        
    </div>
    {% endif %}
</div>








<script>
    document.getElementById('banner-title').innerText = 'Health Record';
</script>

{% endblock %}
{% extends "Dentist/dentist_dash.html" %}
{% block dentistcontent %}

<style>
.main-container {
    height: auto;
    width: 100%;    
    display: flex;
    flex-direction: column;
    flex-wrap: wrap;
    justify-content: space-between;
    gap: 15px;
}


.main-containers {
    background-color: #ffffff;
    height: auto;
    flex: 1 0 ;
    border-radius: 15px;
}

    
</style>

<div class="main-container">

    <div class="main-containers">
        <h2>STEP 3: CHOOSE PATIENT IN PATIENT RECORD DATABASE</h2>



        <table>
            <tr>
              <th>ID</th>
              <th>Last Name</th>
              <th>Middle Name</th>
              <th>First Name</th>
              <th>Birthdate</th>
              <th>Sex</th>
              <th>Religion</th>
              <th>Nationality</th>
              <th>Home Address</th>
              <th>Occupation</th>
              <th>ADD / UPDATE INTRAORAL</th>
              <th>Update Treatment Record</th>
            </tr>
            
            {% for patient in patients %}
            
            <tr>
                <td>{{forloop.counter}}</td>
                <td>{{patient.last_name}}</td>
                <td>{{patient.middle_name}}</td>
                <td>{{patient.first_name}}</td>
                <td>{{patient.birth_date}}</td>
                <td>{{patient.sex}}</td>
                <td>{{patient.religion}}</td>
                <td>{{patient.nationality}}</td>
                <td>{{patient.home_address}}</td>
                <td>{{patient.occupation}}</td>
                <td>
                    <form method="POST" style="display:inline;">
                        {% csrf_token %}
                        <input type="hidden" name="patient_id" value="{{ patient.id }}">
                        <button type="submit" name="select_patient">Fill Intraoral Exam</button>
                    </form>
                </td>
                <td>
                    <form method="POST" style="display:inline; margin-left: 5px;">
                        {% csrf_token %}
                        <input type="hidden" name="patient_id" value="{{ patient.id }}">
                        <button type="submit" name="update_treatment">Update Treatment Record</button>
                    </form>
                </td>
            </tr>

            {% empty %}
            
            <tr>
                There is no data yet.
            </tr>
                
            {% endfor %}

            

          </table>


    </div>
    <!-- <div class="main-containers">
        <h2>STEP 4: INTRAORAL EXAMINATION</h2>

        <p>place the chart here</p>

        <form method="POST">
            {% csrf_token %}

            <fieldset>
                <legend>Intraoral Examinations</legend>
                {{ intraoralexaminations_form.as_p }}
            </fieldset>


            <button type="submit">Submit</button>
        </form>


        <p>Xray taken : checkbox</p>
        <p>periodontal screening: checkbox</p>
        <p>occusion : checkbox</p>
        <p>appliances: checkbox</p>
        <p>TMD: checkbox</p>


    </div> -->


    {% if selected_patient and intraoralexamination_form %}
    <div class="main-containers">
        <h2>STEP 4: INTRAORAL EXAMINATION</h2>
        <h3>Patient: {{ selected_patient.first_name }} {{ selected_patient.last_name }}</h3>

        {% if message %}
            <p style="color:green;">{{ message }}</p>
        {% endif %}

        <form method="POST">
            {% csrf_token %}
            <input type="hidden" name="patient_id" value="{{ selected_patient.id }}">
            {{ intraoralexamination_form.as_p }}
            <button type="submit" name="submit_exam">Submit Exam</button>
        </form>
    </div>
    {% endif %}

    {% if selected_patient and treatment_form %}
    <div class="main-containers">
        <h2>STEP 5: TREATMENT RECORD</h2>
        <h3>Patient: {{ selected_patient.first_name }} {{ selected_patient.last_name }}</h3>

        <form method="POST">
            {% csrf_token %}
            <input type="hidden" name="patient_id" value="{{ selected_patient.id }}">
            {{ treatment_form.as_p }}
            <button type="submit" name="submit_treatment">Submit Treatment Record</button>
        </form>
    </div>
    {% endif %}

</div>

<script>
    document.getElementById('banner-title').innerText = 'Patient Health Records';
</script>

{% endblock %}
